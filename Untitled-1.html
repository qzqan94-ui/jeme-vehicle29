<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ูููุฐุฌ ุชุณููู ุงููุฑูุจุฉ - ุชูุงุนูู</title>
  <style>
   input[type="text"],
input[type="number"],
input[type="date"],
textarea {
  text-align: center;
  vertical-align: middle;
  line-height: 1.6;
  height: 30px;
  padding: 0;
  display: inline-block;
  font-size: 16px;
  font-family: inherit;
}

td {
  vertical-align: middle;
}

    html, body {
  height: 100%;
  overflow-x: hidden;
  overflow-y: auto;
}

.result-page {
  display: none;
  margin-top: 20px;
  width: 100%;
  max-width: 100%;
  overflow-x: auto;
  overflow-y: visible;
  background: #fff;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}

.result-page table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
}

.result-page img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 5px auto;
}

input[type="text"], input[type="date"], input[type="time"] {
      font-size: 13px;
      padding: 4px 6px;
      width: 98%; 
      box-sizing: border-box; 
      /* ูุฐุง ุงูุณุทุฑ ูู ุงููุณุคูู ุนู ุชูุณูุท ุงููุชุงุจุฉ ุฏุงุฎู ูุฑุจุน ุงูุฅุฏุฎุงู */
      text-align: center; 
      border: 1px solid #aaa;
    }
    :root{--accent:#ff8c00;--muted:#666;--card:#fff;}
    body{font-family:"Segoe UI", Tahoma, Arial; margin:16px; background:#fafafa; color:#111; direction:rtl;}
    .container{max-width:980px;margin:0 auto;}
    .card{background:var(--card); padding:18px; border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,.05);}
    h1{color:var(--accent); text-align:center; margin:6px 0 12px;}
    .step{display:none;}
    .step.active{display:block; animation:fade .25s;}
    @keyframes fade {from{opacity:0}to{opacity:1}}
    label{display:block; text-align:right; margin:8px 0; font-weight:600;}
    input[type="text"], input[type="date"], input[type="time"], select {width:100%; padding:8px 10px; border-radius:6px; border:1px solid #ccc; box-sizing:border-box; text-align:center;}
    .controls{display:flex; gap:10px; justify-content:center; margin-top:16px;}
    button{background:var(--accent); color:#fff; border:none; padding:10px 18px; border-radius:8px; cursor:pointer;}
    button.secondary{background:#eee; color:#222;}
    .image-row{display:flex; gap:18px; justify-content:center; flex-wrap:wrap; margin-top:12px;}
    .car-box, .fuel-box{position:relative; border:1px solid #ddd; border-radius:10px; overflow:hidden; background:#fff;}
    .car-box img, .fuel-box img{display:block; max-width:100%; height:auto; user-select:none;}
    .car-box{width:520px;}
    .fuel-box{width:260px; padding:10px;}
    .marker{position:absolute; width:18px; height:18px; border-radius:50%; background:rgba(255,0,0,.85); border:2px solid #800; transform:translate(-50%,-50%); cursor:pointer;}
    .small{font-size:13px;color:var(--muted); text-align:center; margin-top:6px;}
    canvas{border:1px dashed #ccc; border-radius:8px; background:#fff; touch-action:none;}
    .progress{height:8px; background:#eee; border-radius:6px; overflow:hidden; margin-bottom:12px;}
    .progress > div{height:100%; background:linear-gradient(90deg,var(--accent), #e07000); width:0%;}
    /* Result layout (mirror template) */
    .result-page{display:none; margin-top:10px;}
    table{width:100%; border-collapse:collapse; margin-bottom:18px;}
    th,td{border:1px solid #000; padding:8px; vertical-align:middle;}
    th{background:#f1f1f1; font-weight:bold;}
    .section-title{background:#f8f8f8; font-weight:bold; text-align:center; font-size:16px;}
    .note{color:#555; font-size:14px; text-align:center; margin-top:6px;}
    .name{color:#0040ff; font-weight:700;}
    .actions-result{display:flex; gap:10px; justify-content:center; margin-top:12px;}
    .print-btn{background:#2b7cff;}
    
  </style>
</head>
<body>

<style>
  .terms-popup {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: none;
    justify-content: center;
    align-items: center;
  }

  .popup-content {
    background: white;
    padding: 20px;
    border-radius: 8px;
    width: 80%;
    max-width: 600px;
    text-align: center;
    box-shadow: 0px 0px 10px rgba(0,0,0,0.5);
  }

  #acceptTermsBtn {
    background: #ff8c00;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 15px;
  }

  #acceptTermsBtn:hover {
    background: #e07000;
  }
</style>

  <div class="container">
    <div class="card">
      <h1>ูููุฐุฌ ุชุณููู ุงููุฑูุจุฉ โ ุชูุงุนูู</h1><div class="progress"><div id="prog" style="width:0%">
      <div style="display:flex; align-items:center; justify-content:center; gap:10px; margin:20px 0;">
  <img src="1.g.jpg" alt="ุดุนุงุฑ ูุฒุงุฑุฉ ุงูุซูุงูุฉ" style="height:50px;">
      </div></div>
  <h1 style="margin:0;">ูููุฐุฌ ุชุณููู ุงููุฑูุจุฉ</h1>
</div>

<style>
  /* โ ุชูุณูู ุนุงู ููุฌุฏูู ุฏุงุฎู ุตูุญุฉ ุงููุชูุฌุฉ */
  .result-page {
    overflow-x: auto; /* ูุณูุญ ุจุงูุชูุฑูุฑ ุงูุฃููู ูู ุญุงู ูุงู ุงูุฌุฏูู ุนุฑูุถ */
  }

  .result-page table {
    width: 90%;             /* ๐ ููููู ุชุบููุฑูุง ุฅูู 100% ุฃู 80% ุญุณุจ ุฑุบุจุชู */
    margin: 20px auto;      /* ุชูุณูุท ุงูุฌุฏูู ูู ุงูุตูุญุฉ */
    border-collapse: collapse;
    font-size: 14px;
    border: 1px solid #000;
  }

  .result-page th, 
  .result-page td {
    border: 1px solid #000;
    padding: 8px 10px;
    text-align: center;
  }


    
  
</style>
      <!-- STEP 1: ุจูุงูุงุช ุงููุฑูุจุฉ ุงูุฃุณุงุณูุฉ -->
      <div id="step1" class="step active">
        <label>1. ููุน ุงููุฑูุจุฉ</label>
        <input type="text" id="carType" placeholder="ูุซุงู: ุจุงุฌูุฑู">
        <label>2. ุฑูู ุงูููุญุฉ</label>
        <input type="text" id="plateNumber" placeholder="ูุซุงู: ุฃ ุจ ุฌ 1234">
        <label>3. ุงูููุฏูู</label>
        <input type="text" id="model" placeholder="ูุซุงู: 2024">
        <label>4. ุงูููู</label>
        <input type="text" id="color" placeholder="ูุซุงู: ุฃุจูุถ">
        <div class="small">ุงุถุบุท ุงูุชุงูู ูููุชุงุจุนุฉ ุฅูู ุญุงูุฉ ุงููุฑูุจุฉ ูุจู ุงูุงุณุชุฎุฏุงู.</div>
      </div>

      <!-- STEP 2: ุญุงูุฉ ุงูุณูุงุฑุฉ ูุจู ุงูุงุณุชุฎุฏุงู - ุนุฏุงุฏ ู ุตูุฑุฉ -->
      <div id="step2" class="step">
        <label>ุญุงูุฉ ุงููุฑูุจุฉ ูุจู ุงูุงุณุชุฎุฏุงู โ ูุฑุงุกุฉ ุงูุนุฏุงุฏ</label>
        <input type="text" id="odoBefore" placeholder="ูุซุงู: 12500 ูู">
        <div style="margin-top:10px;"></div>
        <label>ุชุญุฏูุฏ ุฃูุงูู ุงูุถุฑุฑ (ูุจู ุงูุงุณุชุฎุฏุงู)</label>
        <div class="image-row">
          <div class="car-box" id="carBeforeBox">
            <img id="carBeforeImg" src="car.png.png" alt="ุตูุฑุฉ ุงูุณูุงุฑุฉ ูุจู ุงูุงุณุชุฎุฏุงู">
          </div>
        </div>
        <div class="note">ุงููุฑ ูุชุญุฏูุฏ ุงูุถุฑุฑ โ ุงููุฑ ุนูู ุงูุนูุงูุฉ ูุฅุฒุงูุชูุง</div>
        <label style="margin-top:12px;">ูุณุจุฉ ุงูุจูุฒูู ูุจู ุงูุงุณุชุฎุฏุงู (ูููู ุงูููุฑ ุนูู ุงูุนุฏุงุฏ ุฃู ุงุฎุชูุงุฑ)</label>
        <div class="image-row">
          <div class="fuel-box" id="fuelBeforeBox">
            <img id="fuelBeforeImg" src="car bt.png" alt="ุนุฏุงุฏ ุงูุจูุฒูู ูุจู">
          </div>
          <select id="fuelBeforeSelect" style="width:200px;">
            <option value="">ุงุฎุชุฑ ูุณุจุฉ</option>
            <option value="ูุงุฑุบ">ูุงุฑุบ</option>
            <option value="ุฑุจุน">ุฑุจุน</option>
            <option value="ูุตู">ูุตู</option>
            <option value="ุซูุงุซุฉ ุฃุฑุจุงุน">ุซูุงุซุฉ ุฃุฑุจุงุน</option>
            <option value="ููุชูุฆ">ููุชูุฆ</option>
          </select>
        </div>
      </div>

      <!-- STEP 3: ุญุงูุฉ ุงูุณูุงุฑุฉ ุจุนุฏ ุงูุงุณุชุฎุฏุงู -->
      <div id="step3" class="step">
        <label>ุญุงูุฉ ุงููุฑูุจุฉ ุจุนุฏ ุงูุงุณุชุฎุฏุงู โ ูุฑุงุกุฉ ุงูุนุฏุงุฏ</label>
        <input type="text" id="odoAfter" placeholder="ูุซุงู: 12800 ูู">
        <label style="margin-top:10px;">ุชุญุฏูุฏ ุฃูุงูู ุงูุถุฑุฑ (ุจุนุฏ ุงูุงุณุชุฎุฏุงู)</label>
        <div class="image-row">
          <div class="car-box" id="carAfterBox">
            <img id="carAfterImg" src="car.png.png" alt="ุตูุฑุฉ ุงูุณูุงุฑุฉ ุจุนุฏ ุงูุงุณุชุฎุฏุงู">
          </div>
        </div>
        <div class="note">ุงููุฑ ูุชุญุฏูุฏ ุงูุถุฑุฑ โ ุงููุฑ ุนูู ุงูุนูุงูุฉ ูุฅุฒุงูุชูุง</div>
        <label style="margin-top:12px;">ูุณุจุฉ ุงูุจูุฒูู ุจุนุฏ ุงูุงุณุชุฎุฏุงู</label>
        <div class="image-row">
          <div class="fuel-box" id="fuelAfterBox">
            <img id="fuelAfterImg" src="car bt.png" alt="ุนุฏุงุฏ ุงูุจูุฒูู ุจุนุฏ">
          </div>
          <select id="fuelAfterSelect" style="width:200px;">
            <option value="">ุงุฎุชุฑ ูุณุจุฉ</option>
            <option value="ูุงุฑุบ">ูุงุฑุบ</option>
            <option value="ุฑุจุน">ุฑุจุน</option>
            <option value="ูุตู">ูุตู</option>
            <option value="ุซูุงุซุฉ ุฃุฑุจุงุน">ุซูุงุซุฉ ุฃุฑุจุงุน</option>
            <option value="ููุชูุฆ">ููุชูุฆ</option>
          </select>
        </div>
      </div>

      <!-- STEP 4: ุงุณู ุงููุณุชูู + ุชูููุน -->
      <div id="step4" class="step">
        <label>ุงุณู ุงููุณุชูู</label>
        <input type="text" id="receiverName" placeholder="ุงูุชุจ ุงุณู ุงููุณุชูู ููุง">
        <label style="margin-top:10px;">ุงูุชูููุน ุงูุฅููุชุฑููู (ุงุฑุณู ููุง)</label>
        <canvas id="signCanvas" width="760" height="140"></canvas>
        <div style="display:flex; gap:10px; justify-content:center; margin-top:8px;">
          <button type="button" id="clearSignBtn" class="secondary">ูุณุญ</button>
          <button type="button" id="saveSignPreview" class="secondary">ูุนุงููุฉ ุงูุชูููุน</button>
        </div>
      </div>

      <!-- STEP 5: ุงูุชุงุฑูุฎ ูุงูููุช + ููุงุญุธุงุช -->
      <div id="step5" class="step">
        <label>ุชุงุฑูุฎ ูููุช ุงูุงุณุชูุงู</label>
        <div style="display:flex; gap:8px; justify-content:center;">
          <input type="date" id="dateField" style="max-width:220px;">
          <input type="time" id="timeField" style="max-width:160px;">
        </div>
        <label style="margin-top:12px;">ููุงุญุธุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)</label>
        <input type="text" id="notes" placeholder="ููุงุญุธุงุช...">
      </div>

      <!-- ุฃุฒุฑุงุฑ ุงูุชููู -->
      <div class="controls">
        <button id="prevBtn" class="secondary" onclick="prevStep()" disabled>ุงูุณุงุจู</button>
        <button id="nextBtn" onclick="nextStep()">ุงูุชุงูู</button>
      </div>
    </div>

    <!-- ุตูุญุฉ ุงููุชุงุฆุฌ -->
    <div id="result" class="result-page card" style="margin-top:14px;">
      <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
    </div>
  </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
/* ====== ุฅุฏุงุฑุฉ ุงูุฎุทูุงุช ูุจุฑูุฌุฑุณ ====== */
const steps = ['step1','step2','step3','step4','step5'];
let cur = 0;
const progEl = document.getElementById('prog');
function updateUI(){
  steps.forEach((id,i)=>{
    document.getElementById(id).classList.toggle('active', i===cur);
  });
  document.getElementById('prevBtn').disabled = cur===0;
  document.getElementById('nextBtn').textContent = (cur === steps.length-1) ? 'ุนุฑุถ ุงููุชูุฌุฉ' : 'ุงูุชุงูู';
  progEl.style.width = `${Math.round(((cur+1)/steps.length)*100)}%`;
}
function nextStep(){
  // ุชุญูู ุจุณูุท ููู ุฎุทูุฉ
  if(cur===0){
    // ูุง ููุฒู ุงูุญููู ููู ููุนู ูุซุงู: ููุน ุงููุฑูุจุฉ ูุงุณู ุงููุณุชูู ูุงุญูุงู
  }
  if(cur < steps.length-1){ cur++; updateUI(); return; }
  // ุฎุทูุฉ ุงูุงุฎูุฑุฉ -> ุนุฑุถ ุงููุชูุฌุฉ
  renderResult();
}
function prevStep(){ if(cur>0){ cur--; updateUI(); } }
updateUI();

/* ====== ูุธุงุฆู ูุถุน ุงูุนูุงูุงุช ุนูู ุงูุตูุฑ (ูุณุจุฉ ูุฅุญุฏุงุซูุงุช ูุณุจูุฉ) ====== */
function enableMarking(boxId, storeArray){
  const box = document.getElementById(boxId);
  const img = box.querySelector('img');
  const marks = [];
  box.addEventListener('click', function(e){
    if(e.target.classList.contains('marker')) return;
    const rect = img.getBoundingClientRect();
    const x = (e.clientX - rect.left)/rect.width*100;
    const y = (e.clientY - rect.top)/rect.height*100;
    const m = document.createElement('div');
    m.className = 'marker';
    m.style.left = x + '%';
    m.style.top = y + '%';
    m.title = 'ุงููุฑ ูุฅุฒุงูุฉ';
    m.addEventListener('click', function(ev){
      ev.stopPropagation();
      const idx = marks.indexOf(markObj);
      if(idx>=0) marks.splice(idx,1);
      m.remove();
    });
    const markObj = {x: parseFloat(x.toFixed(2)), y: parseFloat(y.toFixed(2))};
    marks.push(markObj);
    box.appendChild(m);
  });
  // expose getter
  return ()=>marks.slice();
}
const getCarBeforeMarks = enableMarking('carBeforeBox');
const getCarAfterMarks = enableMarking('carAfterBox');

/* ====== ุนุฏุงุฏ ุงูุจูุฒูู: ูุณูุญ ุจุงูููุฑ ุฃู ุงูุงุฎุชูุงุฑ - ูุฎุฒู ููููุฉ ูุตูุฉ + ูุคุดุฑ ูุฑุฆู ====== */
function enableFuel(boxId, selectId){
  const box = document.getElementById(boxId);
  const img = box.querySelector('img');
  const sel = document.getElementById(selectId);
  let value = '';
  box.addEventListener('click', function(e){
    const old = box.querySelector('.marker');
    if(old) old.remove();
    const rect = img.getBoundingClientRect();
    const cx = e.clientX - rect.left;
    const ratio = cx / rect.width;
    if(ratio < .15) value = 'ูุงุฑุบ';
    else if(ratio < .35) value = 'ุฑุจุน';
    else if(ratio < .65) value = 'ูุตู';
    else if(ratio < .9) value = 'ุซูุงุซุฉ ุฃุฑุจุงุน';
    else value = 'ููุชูุฆ';
    const m = document.createElement('div'); m.className='marker';
    m.style.left = (ratio*100) + '%'; m.style.top = '50%';
    box.appendChild(m);
    sel.value = ''; // ุงูุตู ุงูุงุฎุชูุงุฑ ุนู ุงูููุทุฉ
  });
  sel.addEventListener('change', function(){ value = sel.value; // ุฑุณู ูุคุดุฑ ุชูุฑูุจู
    const old = box.querySelector('.marker'); if(old) old.remove();
    if(!value) return;
    const m = document.createElement('div'); m.className='marker';
    let xp = 10;
    if(value==='ูุงุฑุบ') xp=5;
    if(value==='ุฑุจุน') xp=25;
    if(value==='ูุตู') xp=50;
    if(value==='ุซูุงุซุฉ ุฃุฑุจุงุน') xp=75;
    if(value==='ููุชูุฆ') xp=95;
    m.style.left = xp + '%'; m.style.top='50%';
    box.appendChild(m);
  });
  return ()=>value;
}
const getFuelBefore = enableFuel('fuelBeforeBox','fuelBeforeSelect');
const getFuelAfter = enableFuel('fuelAfterBox','fuelAfterSelect');

/* ====== ููุญุฉ ุงูุชูููุน (canvas) ====== */
const signCanvas = document.getElementById('signCanvas');
const sctx = signCanvas.getContext('2d');
let drawing=false, lastX=0, lastY=0;
function getPos(e){
  const r = signCanvas.getBoundingClientRect();
  if(e.touches && e.touches[0]) return {x: e.touches[0].clientX - r.left, y: e.touches[0].clientY - r.top};
  return {x: e.clientX - r.left, y: e.clientY - r.top};
}
function start(e){ drawing=true; const p=getPos(e); lastX=p.x; lastY=p.y; sctx.beginPath(); sctx.moveTo(lastX,lastY); e.preventDefault(); }
function move(e){ if(!drawing) return; const p=getPos(e); sctx.lineTo(p.x,p.y); sctx.strokeStyle='#000'; sctx.lineWidth=2.6; sctx.lineCap='round'; sctx.stroke(); lastX=p.x; lastY=p.y; e.preventDefault(); }
function end(e){ drawing=false; e.preventDefault(); }
signCanvas.addEventListener('mousedown', start); signCanvas.addEventListener('mousemove', move); signCanvas.addEventListener('mouseup', end); signCanvas.addEventListener('mouseleave', end);
signCanvas.addEventListener('touchstart', start, {passive:false}); signCanvas.addEventListener('touchmove', move, {passive:false}); signCanvas.addEventListener('touchend', end);
document.getElementById('clearSignBtn').addEventListener('click', ()=> sctx.clearRect(0,0,signCanvas.width,signCanvas.height));
document.getElementById('saveSignPreview').addEventListener('click', ()=>{
  const w = window.open('','_blank'); w.document.write(`<img src="${signCanvas.toDataURL()}" style="max-width:100%;">`);
});

/* ====== ุชูููุฏ ุตูุญุฉ ุงููุชูุฌุฉ ุจุชูุณูู ุงูุทูุจ ====== */
function renderResult(){
  // ุฌูุน ุงูุจูุงูุงุช
  const carType = document.getElementById('carType').value || '';
  const plate = document.getElementById('plateNumber').value || '';
  const model = document.getElementById('model').value || '';
  const color = document.getElementById('color').value || '';
  const odoBefore = document.getElementById('odoBefore').value || '';
  const odoAfter = document.getElementById('odoAfter').value || '';
  const carBeforeMarks = getCarBeforeMarks();
  const carAfterMarks = getCarAfterMarks();
  const fuelBeforeVal = getFuelBefore() || document.getElementById('fuelBeforeSelect').value || '';
  const fuelAfterVal = getFuelAfter() || document.getElementById('fuelAfterSelect').value || '';
  const receiver = document.getElementById('receiverName').value || '';
  const dateVal = document.getElementById('dateField').value || (new Date()).toISOString().slice(0,10);
  const timeVal = document.getElementById('timeField').value || (new Date()).toTimeString().slice(0,5);
  const notes = document.getElementById('notes').value || '';
  const signData = signCanvas.toDataURL();

  // ูุณุฎ HTML ูููุชูุฌุฉ ููู ุชูุณููู ุงููุทููุจ:
  const resultDiv = document.getElementById('result');
  resultDiv.innerHTML = `
  <style>
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
    }
    th, td {
      padding: 4px 6px;
      text-align: center;
      vertical-align: middle;
    }
    #resSignCell img {
      max-width: 120px;
      height: auto;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    input[type="text"], input[type="date"], input[type="time"] {
      font-size: 12px;
      padding: 2px 4px;
    }
    h5 {
      font-size: 16px;
    }
    .car-container img, .fuel-container img {
      max-height: 80px;
    }
    .signature-table {
      page-break-inside: avoid;
    }
  </style>
<div style="display:flex; align-items:center; justify-content:space-between; width:100%; direction:rtl; margin:20px 0;">
  <!-- ุงูุดุนุงุฑ ูู ุฃูุตู ุงููููู -->
  <img src="1.g.jpg" alt="ุดุนุงุฑ ูุฒุงุฑุฉ ุงูุซูุงูุฉ" style="height:50px;">

  <!-- ูููุฉ ูู ุงูููุชุตู -->
  <h2 style="color:var(--accent); text-align:center; flex:1; margin:0;">ุชุณููู ุฏุงุฎูู</h2>

  <!-- ุนูุตุฑ ูุงุฑุบ ุนูู ุงูุฌูุฉ ุงูููุงุจูุฉ ููุดุนุงุฑ ููุญูุงุธ ุนูู ุงูุชูุฑูุฒ -->
  <div style="width:50px;"></div>
</div>
<h5 style="color:var(--accent); text-align:center; flex:1; margin:0;">ุฑูู ุชุณูุณูู\\\</h5>
<table>
        <th style="width:25%;">ููุน ุงูุณูุงุฑุฉ</th>
        <td style="width:25%;"><input type="text" id="resCarType" value="${escapeHtml(carType)}"></td>
        <th style="width:25%;">ุฑูู ุงูููุญุฉ</th>
        <td style="width:25%;"><input type="text" id="resPlate" value="${escapeHtml(plate)}"></td>
    </table>

    <table>
      <tr>
        <th class="section-title">ุญุงูุฉ ุงูุณูุงุฑุฉ ูุจู ุงูุงุณุชุฎุฏุงู</th>
        <th class="section-title">ุญุงูุฉ ุงูุณูุงุฑุฉ ุจุนุฏ ุงูุงุณุชุฎุฏุงู</th>
      </tr>
      <tr>
        <td>ูุฑุงุกุฉ ุงูุนุฏุงุฏ: <input type="text" id="resOdoBefore" value="${escapeHtml(odoBefore)}"></td>
        <td>ูุฑุงุกุฉ ุงูุนุฏุงุฏ: <input type="text" id="resOdoAfter" value="${escapeHtml(odoAfter)}"></td>
      </tr>
      <tr>
        <td>
          <div class="car-container" id="resCarBeforeBox" style="display:inline-block; border:1px solid #ccc; border-radius:8px; overflow:hidden;">
            <img id="resCarBeforeImg" src="car.png.png" alt="ุตูุฑุฉ ุงูุณูุงุฑุฉ ูุจู ุงูุงุณุชุฎุฏุงู">
          </div>
          <div class="note">ููุงูุน ุงูุถุฑุฑ ูุจู ุงูุงุณุชุฎุฏุงู</div>
        </td>
        <td>
          <div class="car-container" id="resCarAfterBox" style="display:inline-block; border:1px solid #ccc; border-radius:8px; overflow:hidden;">
            <img id="resCarAfterImg" src="car.png.png" alt="ุตูุฑุฉ ุงูุณูุงุฑุฉ ุจุนุฏ ุงูุงุณุชุฎุฏุงู">
          </div>
          <div class="note">ููุงูุน ุงูุถุฑุฑ ุจุนุฏ ุงูุงุณุชุฎุฏุงู</div>
        </td>
      </tr>

      <tr>
        <td>
          <div class="fuel-container" id="resFuelBeforeBox" style="display:inline-block; border:1px solid #ccc; border-radius:8px; overflow:hidden;">
            <img src="car bt.png" alt="ุนุฏุงุฏ ุงูุจูุฒูู ูุจู" class="fuel">
          </div>
          <div class="note">ูุณุจุฉ ุงูุจูุฒูู: <strong id="resFuelBeforeText">${escapeHtml(fuelBeforeVal)}</strong></div>
        </td>
        <td>
          <div class="fuel-container" id="resFuelAfterBox" style="display:inline-block; border:1px solid #ccc; border-radius:8px; overflow:hidden;">
            <img src="car bt.png" alt="ุนุฏุงุฏ ุงูุจูุฒูู ุจุนุฏ" class="fuel">
          </div>
          <div class="note">ูุณุจุฉ ุงูุจูุฒูู: <strong id="resFuelAfterText">${escapeHtml(fuelAfterVal)}</strong></div>
        </td>
      </tr>

      <tr>
        <td>ุงุณู ุงููุณุชูู: <input type="text" id="resReceiver" value="${escapeHtml(receiver)}"></td>
        <td>ุงุณู ุตุงุญุจ ุงูุตูุงุญูุฉ: <span class="name">ุฌูุงู ูุญูุฏ ุนุจุฏู ุญููู</span></td>
      </tr>

      <tr>
        <td>
          <div class="datetime-cell" style="display:flex; justify-content:space-around; gap:8px; align-items:center;">
            <label>ุชุงุฑูุฎ ุงูุงุณุชูุงู:</label>
            <input type="date" id="resDate" value="${escapeHtml(dateVal)}">
            <input type="time" id="resTime" value="${escapeHtml(timeVal)}">
          </div>
        </td>
        <td>
          <div class="datetime-cell" style="display:flex; justify-content:space-around; gap:8px; align-items:center;">
            <label>ุชุงุฑูุฎ ุงูุชุณููู:</label>
            <input type="date" id="resReturnDate" value="${escapeHtml(dateVal)}">
            <input type="time" id="resReturnTime" value="${escapeHtml(timeVal)}">
          </div>
        </td>
      </tr>

      <tr><td style="direction: rtl; text-align: right;">
  <span class="signature1" style="margin-left:10px;">ุงูุชูููุน:</span>
  <img id="resSignImg" src="${signData}" alt="ุงูุชูููุน" style="max-width:200px; border:1px solid #ccc; border-radius:6px;">
</td>

        <td style="text-align: right;">
  <span class="signature2">ุงูุชูููุน:</span>
</td>

      </tr>
    </table>

    

    <table>
      <tr><th>ุฅูุฑุงุฑ ุงุณุชูุงู</th></tr>
      <tr><td>
        <div class="declaration-box">
          ุฃูุฑ ุจุฃููู ุงููุฐููุฑ ุฃุนูุงู ุงุณุชููุช ุงูุณูุงุฑุฉ ุงููุฐููุฑุฉ ุฃุนูุงู ูุงูุนุงุฆุฏ ููููุชูุง ููุฒุงุฑุฉ ุงูุซูุงูุฉ ูุฃุชุนูุฏ ุจุฃู ุงุญุงูุธ ุนูู ุชุทุจูู ูุงุญุชุฑุงู ุฃูุธูุฉ ุงูุณูุฑ ุงููุฑูุฑูุฉ ูุฅู ุฃููู ุจุงูุตูุงูุฉ ุงูุฏูุฑูุฉ ูุฅุตูุงุญ ุงูุฃุนุทุงู ุงูุชู ุจูุง ูุฐูู ุจุงูุชูุณูู ูุน 
          ุฅุฏุงุฑุฉ ุงูุฎุฏูุงุช ุงููุดุชุฑูุฉ ุจุงููุฒุงุฑุฉ ูุชุณููููุง ุจุญุงูุฉ ุฌูุฏุฉ ุญูู ุทูุจูุง ูุชุทุจูู ุฌููุน ุงูุชุนูููุงุช ุงูุฎุงุตุฉ ุจุงุณุชุฎุฏุงู ุงูุณูุงุฑุฉ  </div>
      </td></tr>
      <tr><th>ุชูููุถ ุงููุฑูุจุฉ</th></tr>
      <tr><td>
        <div class="declaration-box">
        ุฅูู ูู ูููู ุงูุงูุฑ:<br>ููุถูุง ุงููุฐููุฑ ุงุนูุงู ุจููุงุฏุฉ ุงููุฑูุจุฉ ุงููุฐููุฑุฉ ุฃุนูุงู ูุงูุนุงุฆุฏ ููููุชูุง ููุฒุงุฑุฉ ุงูุซูุงูุฉ , ุฏุงุฎู ุงูููููุฉ ุงูุนุฑุจูุฉ ุงูุณุนูุฏูุฉ </div>
      </td></tr>
      <tr><th> ุงูููุงูุงุช ุฃู ุงูุฒูุงุฑุงุช ุงูุฑุณููุฉ</th></tr>
      <tr><td><div class="declaration-box">ุฃุณุชูุจุงู ุงููููุฏ ูุงูุฒูุงุฑุงุช ุงูุฑุณููู ูุฅูุงุฑุฉ ุงูููุทูุฉ + ุฃูุงูู ุงูููุทูุฉ + ุงูุจูุฏูุงุช ูุงููุญุงูุธุงุช +ุฒูุงุฑุงุช ููุงูุน ุฃุซุฑูู +ุฒูุงุฑุฉ ุฌุฒุฑ ูุฑุณุงู ุฒุบูุฑูุง </div></td></tr>
    </table>

    <table>
      <tr>
        <th class="section-title" colspan="2">ุงูุชูููุน ุนูุฏ ุงูุงุณุชูุงู</th>
        <th class="section-title" colspan="2">ุงูุชูููุน ุนูุฏ ุงูุชุณููู</th>
      </tr>
      <tr>
        <th>ุงุณู ุงููุณุชูู</th><th>ุงูุชูููุน</th><th>ุงุณู ุงููุณุชูู</th><th>ุงูุชูููุน</th>
      </tr>
      <tr>
        <td><input type="text" placeholder="ุงูุชุจ ุงูุงุณู ููุง" style="width:95%; text-align:center;" value="${escapeHtml(receiver)}"></td>
        <td id="resSignCell"><img id="resSignImg" src="${signData}" alt="ุงูุชูููุน" style="max-width:200px; border:1px solid #ccc; border-radius:6px;"></td>
        <td><input type="text" placeholder="ุงูุชุจ ุงูุงุณู ููุง" style="width:95%; text-align:center;" value="${escapeHtml(receiver)}"></td>
        <td id="resSignCell"><img id="resSignImg" src="${signData}" alt="ุงูุชูููุน" style="max-width:200px; border:1px solid #ccc; border-radius:6px;"></td>
      </tr>
      <tr>
        <th>ุตุงุญุจ ุงูุตูุงุญูุฉ</th><th>ุงูุชูููุน</th><th>ุตุงุญุจ ุงูุตูุงุญูุฉ</th><th>ุงูุชูููุน</th>
      </tr>
      <tr>
        <td><span class="name">ุฌูุงู ูุญูุฏ ุนุจุฏู ุญููู</span></td><td></td><td><span class="name">ุฌูุงู ูุญูุฏ ุนุจุฏู ุญููู</span></td><td></td>
      </tr>
    </table>
   <br>
   <br>
   
   <div style="display:flex; align-items:center; justify-content:flex-start; gap:10px; margin:20px 0; direction:rtl;">
  <img src="1.g.jpg" alt="ุดุนุงุฑ ูุฒุงุฑุฉ ุงูุซูุงูุฉ" style="height:50px; margin-right:0;"></div>
    <h2 style="color:var(--accent); text-align:center; margin-top:18px;">ุชุนูุฏ ุงุณุชุฎุฏุงู</h2>
    <div style="text-align:right; line-height:1.8; font-size:15px; margin:0 20px;">
    <br>
    
      <p>ูุชุนูุฏ ุงููุณุชุฎุฏู ุจูุง ููู ุจุดุฃู ุงุณุชุฎุฏุงู ุณูุงุฑุฉ ุงูุฌูุฉ:</p>
      <ol style="padding-right:25px;">
      
        <li>ูุง ูุณูุญ ุจููุงุฏุฉ ุงูุณูุงุฑุงุช ูุฃู ุดุฎุต ูุง ูุญูู ุฑุฎุตุฉ ููุงุฏุฉ ุณุงุฑูุฉ ุงูููุนูู ุฃู ุฏูู ุณู <strong>(21)ูุนูู ุงู ูููู ุณุงุฆูู ุงูุณูุงุฑุงุช ุฃุญุฏ ูุณุฆููู ุงููุฒุงุฑุฉ ุงู ุชุญุช ููุงูุฉ ุงููุฒุงุฑุฉ </strong> ...</li>
        <br>
        <li>ุงุณุชุฎุฏุงู ุงูุณูุงุฑุฉ ููุท ููููุงู ุงูุฑุณููู ุฏุงุฎู ููุช ุงูุนูู ุฃู ุฎุงุฑุฌุฉ , ูุงูุงูุชุฒุงู ุจุงููุงู ุงูุณูุงุฑุฉ ูู ูููุน ุงููุฒุงุฑุฉ ุฃู ุงููุฑุน ุจุนุฏ ุงูุงูุชูุงุก ูู ุงููููุฉ ูุจุงุดุฑุฉ , ูุชุณููู ุงูุณูุงุฑุฉ ูููุฑุน ุฃู ุงูููุชุจ ุฎูุงู ุงูุฅุฌุงุฒุงุช ุงูุณูููู ุงู ุงูุฑุณููู </li>
        <br>
        <li>ุนุฏู ุงูุชุฏุฎูู ุฏุงุฎู ุงูุณูุงุฑุฉ ูุงููุญุงูุธุฉ ุนูู ูุธุงูุฉ ุงูุณูุงุฑุฉ ูู ุงูุฏุงุฎู ูุงูุฎุงุฑุฌ ูุนุฏู ุงุฒุงูุฉ ุดุนุงุฑ ุงููุฒุงุฑุฉ ุงูุฑุณูู ูู ูููู ุงูุณูุงุฑุฉ , ูุนุฏู ุงูุชุนุฏูู ุงู ุงูุฅุถุงูุฉ ุนูู ุงููุฑูุจุฉ ูู ุชุธููู ุงู ุชุบูุฑ ูุดูู ุงูุณูุงุฑุฉ ุงูุฏุงุฎูู ุฃู ุงูุฎุงุฑุฌู</li>
        <br>
        <li>ุงูุงูุชุฒุงู ุจุงูุตูุงูู ุงูุฏูุฑูุฉ ุจูุณุงูุฉ (5000) ูู ุชูุงููุง ููููุน ุชูู ุจุงูุณูุงุฑุฉ ุงููุณุชุฎุฏูุฉ ุฃู ุงูุจุฏููุฉ , ูุณูุชู ุชุญููู ุงููุณุชูู ูุงูุฉ ุชูุงููู ุฅุตูุงุญ ุงูุชูู ูู ุญุงู ุนุฏู ุงูุงูุชุฒุงู ุจุงูุตูุงูู ุงูุฏูุฑูุฉ , ุจุงูุงุถุงูุฉ ุงูู ุงุชุฎุงุฏ ุงูุฅุฌุฑุงุกุช ุงูููุงุณุจุฉ ุงูุชู ุชุฑุงูุง ุงูุฅุฏุงุฑุฉ ุงููุนููุฉ </li>
        <br>
        <li>ูุงูุญู ููุณุชูู ุงููุฑูุจุฉ ุญุงู ูููุน ุญุงุฏุซ ุงู ุนุทู ุจูุญุฑูุงุชูุง ุงู ูุชู ุงุตูุงุญูุง ูู ูุจูู ูุจุงุดุฑุฉ ุงู ุงูุชูุงุฒู ุนู ุงูุทุฑู ุงูุงุฎุฑ ุฏูู ุชูุณูู ุฅุฏุงุฑุฉ ุงูุฎุฏูุงุช ุงููุดุชุฑูุฉ ุจุงููุฒุงุฑุฉ </li>
        <br>
        <li>ุงูุชุฒุงู ูุณุชูู ุงูุณูุงุฑุฉ ุจุงุดุนุงุฑ ุงุฏุงุฑุฉ ุงูุฎุฏูุงุช ุงููุดุชุฑูุฉ ุจุงููุฒุงุฑุฉ ููุฑุงู ุจุดูู ุฑุณูู ุนู ุฃู ุญุงุฏุซ  ุฃู ุณุฑูุฉ ุฃู ุชูู  ุชุชุนุฑุถ ูู ุงูุณูุงุฑุฉ ุฃู  ุฃู ุงุณุชูุณุงุฑ ูู ุฅุฏุงุฑุฉ ุงูุฎุฏูุงุช ุงููุดุฑูุฉ ุจุดุฃู ุงุณู ูุณุชุฎุฏู ุงูุณูุงุฑุฉ ูู ุงู ููุช ูู ุงูุงููุงุช , ูุงู ููุชุฒู ุจุชุฃููู ุงููุณุชูุฏุงุช ุงูุชุงููู ูู ุญุงู ูููุน ุญุงุฏุซ (ุชูุฑูุฑ ุงููุฑูุฑ ุงู ูุฌู -ูุฑูุฉ ุงูุงุตูุงุญ ) ูุฐุงูู ุงุฑูุงู ูููุฐุฌ ุงูุญูุงุฏุซ</li>
        <br>
        <li>ูุฌุจ ุงูุงูุชุฒุงู ุจุชุนูููุงุช ูุถูุงุจุท ุงูุณูุฑ ุงููุฑูุฑูุฉ ููู ุญุงู ุนุฏู ุงูุชููุฏ ุจูุง ูุชุญูู ุงูุบุฑุงูุงุช ุงูุชู ูุฏ ุชูุฑุถูุง ุงูุฌูุงุช ุงูุญููููุฉ ุงููุฎุชุตุฉ ูุฃู ุณุจุจ ูุงู ุนูู ุงููุณุชูู ุงู ุนูู ุฃู ูู ุณุงุฆููู ุจูุง ูู ุฐูู ูู ูุงูุชุฑุชุจ ุฃู ูุนูุฏ ุงูู ุงูุบุฑุงูุงุช ุงูุชู ุชูุน ุนูู ุงูุณูุงุฑุฉ </li>
        <br>
        <li>ูุงูุญู ูููุณุฆูู ุงู ูุฑุฌุนุฉ ุงูุงุฏุงุฑู ุงุณุชุซูุงุก ุงู ุดุฑุท ูู ุงูุดุฑูุท ุงูุณุงุจูุฉ ูููุง ูุงูุช ุงูุงุณุจุงุจ</li>
        <br>
        <li>ูุชุญูู ุงููุณุฆูู ุงููุฎุงูู ููุฐุง ุงูุดุฑู ุณุญุจ ุงููุฑูุจุฉ ููู ููุฏุฉ ุดูุฑ ูุฃูู ูุฑู ูููุฏุฉ ุดูุฑูู ูู ุงููุฑู ุงูุซุงููู ูุงูุณุญุจ ููุฏุฉ ุณุชู ุงุดูุฑ ูููุฑุฉ ุงูุซุงูุซุฉ ูุน ุชุญูู ุงููุณุฆูู ุงูููุงู ุจูุงุฌุจุงุชู ููุณุฆูููุงุช ุงูุนูู ุจูุฑูุจุชู ุงูุฎุงุตุฉ ุฎูุงู ูุชุฑุฉ ุงูุณุญุจ ูุนุฏู ุงูุงูุชุฒุงู ุจุงููุญุงูุธุฉ ุนูู ุงููุฑูุจุฉ ุงููุณููุฉ ูู </li>
        <br>
        <li>ุฃูุฑ ุจุงูุงุทูุงุน ูุงูุชููุฏ ุจูุงูุฉ ุงูุดุฑูุท ุงููุงุฑุฏุฉ ูู ูุฐุง ุงูุชุนูุฏ.</li>
      </ol>
    </div>
</tr>



    <table>
      <tr style="background:#f1f1f1; font-weight:bold; text-align:center;">
        <th>ููุน ุงูุณูุงุฑุฉ</th><th>ุงูููุญุฉ</th><th>ุงูููุฏูู</th><th>ุงูููู</th><th>ุงูุญุงูุฉ</th>
      </tr>
    
  
      <tr style="text-align:center;">
        <td><input type="text" value="${escapeHtml(carType)}" style="width:95%; text-align:center;"></td>
        <td><input type="text" value="${escapeHtml(plate)}" style="width:95%; text-align:center;"></td>
        <td><input type="text" value="${escapeHtml(model)}" style="width:95%; text-align:center;"></td>
        <td><input type="text" value="${escapeHtml(color)}" style="width:95%; text-align:center;"></td>
        <td>ูุณุชุฎุฏูุฉ</td>
      </tr>
    </table>
<tr>
        <th></th><th></th><th>ุงุณู ุงููุณุชูู</th><th></th>
      </tr>
      <tr>
        <td><input type="text" placeholder="ุงูุชุจ ุงูุงุณู ููุง" style="width:95%; text-align:center;" value="${escapeHtml(receiver)}"></td>
        <td id="resSignCell"><img id="resSignImg" src="${signData}" alt="ุงูุชูููุน" style="max-width:200px; border:1px solid #ccc; border-radius:6px;"></td>
        <td><span class="name">ุงูุฌูู ููุฆุฉ ุงูุชุฑุงุซ</span></td>
        <td></td>
      </tr> <div class="datetime-cell" style="display:flex; justify-content:space-around; gap:8px; align-items:center;">
            <label>ุชุงุฑูุฎ ุงูุชุณููู:</label>
            <input type="date" id="resReturnDate" value="${escapeHtml(dateVal)}">
            <input type="time" id="resReturnTime" value="${escapeHtml(timeVal)}">
          </div>
<p style="text-align:right; font-size:15px;">ููุงุณุชูุณุงุฑ: <a href="tel:0545105222" style="color:blue; text-decoration:none;">(0545105222)</a></p>
    
    <div class="actions-result">
ย ย   <button type="button" class="print-btn print">ุชุญููู ุงูููู ูู PDF</button>
ย   </div>
ย `;

  // ุฅุธูุงุฑ ุงูุตูุญุฉ ูุฅุฎูุงุก ุงููุฏุฎูุงุช
  document.querySelector('.card').style.display='none';
  resultDiv.style.display='block';

  // ... ุฏุงุฎู ุฏุงูุฉ renderResult() ...

ย // ุฅุธูุงุฑ ุงูุตูุญุฉ ูุฅุฎูุงุก ุงููุฏุฎูุงุช
ย document.querySelector('.card').style.display='none';
ย resultDiv.style.display='block';

ย // ุจุนุฏ ูุถุน HTMLุ ุฃุถู ุงูุนูุงูุงุช ุนูู ุงูุตูุฑ ูู ุงูุตูุญุฉ ุงูููุงุฆูุฉ
ย // ุนูุงูุงุช ูุจู
ย setTimeout(()=>{ // ุงูุชุธุฑ ุชุญููู ุงูุตูุฑ
ย ย placeMarkersOnResult('resCarBeforeBox','resCarBeforeImg', carBeforeMarks);
ย ย placeMarkersOnResult('resCarAfterBox','resCarAfterImg', carAfterMarks);
ย ย 
    // **>>>>> ุฅุถุงูุฉ ุงุณุชุฏุนุงุก ุฑุณู ุนูุงูุงุช ุงูุจูุฒูู ููุง <<<<<**
    placeFuelMarkerOnResult('resFuelBeforeBox', fuelBeforeVal);
    placeFuelMarkerOnResult('resFuelAfterBox', fuelAfterVal);
ย ย 
ย },100);

}
// ...

/* ุถุน ุนูุงูุงุช ููู ุงูุตูุฑ ูู ุตูุญุฉ ุงููุชุงุฆุฌ ูู ุงูุฅุญุฏุงุซูุงุช ุงููุณุจูุฉ */
function placeMarkersOnResult(containerId, imgId, marks) {
  const cont = document.getElementById(containerId);
  const img = document.getElementById(imgId);
  if (!cont || !img) return;

  // ุชุฃูุฏ ุฃู ุงูุตูุฑุฉ ูุงูุตูุฏูู ูุถุจูุทุงู ููุชู ุฑุณู ุงูุนูุงูุงุช ุจุฏูุฉ
  cont.style.position = 'relative';
  img.style.display = 'block';
  img.style.width = '100%';
  img.style.height = 'auto';

  // ูุธููุฉ ุฑุณู ุงูุนูุงูุงุช ููุณูุง
  const drawMarks = () => {
    // ุฅุฒุงูุฉ ุงูุนูุงูุงุช ุงููุฏููุฉ
    const olds = cont.querySelectorAll('.marker');
    olds.forEach(o => o.remove());

    // ุฑุณู ุงูุนูุงูุงุช ูู ููุงููุง ุงููุณุจู ุงูุตุญูุญ
    marks.forEach(pt => {
      const m = document.createElement('div');
      m.className = 'marker';
      m.style.position = 'absolute';
      m.style.left = pt.x + '%';
      m.style.top = pt.y + '%';
      cont.appendChild(m);
    });
  };

  // ุฅุฐุง ูุงูุช ุงูุตูุฑุฉ ุฌุงูุฒุฉ (ูุญููุฉ ูุณุจููุง)ุ ุงุฑุณู ููุฑูุง
  if (img.complete) {
    drawMarks();
  } else {
    // ูุฅูุง ุงูุชุธุฑ ุชุญููููุง ุฃูููุง
    img.onload = drawMarks;
  }
}

/* ูุณุงุนุฏุฉ ูุชุนููู ุงููุต ุนูุฏ ูุถุนู ุฏุงุฎู value/HTML */
function escapeHtml(s){
  if(!s) return '';
  return String(s).replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;').replaceAll("'",'&#39;');
}

/* ุฒุฑ ุงูุนูุฏุฉ ูุงูุทุจุงุนุฉ ูุฅุนุงุฏุฉ ุชุนุจุฆุฉ ุงููููุฐุฌ */
/* โ ููุฏ ุฌุฏูุฏ: ุงุณุชุฎุฏุงู jsPDF ูุญูุธ ุงูููู ูุจุงุดุฑุฉ ูู PDF */
document.addEventListener('click', function(e){
    if(e.target.matches('.print-btn') || e.target.matches('button.print')) {
        
        // 1. ุฅุฎูุงุก ุงูุฒุฑ ูุคูุชุงู ูุจู ุจุฏุก ุนูููุฉ ุงูุชุญููู
        const printBtn = e.target;
        printBtn.style.display = 'none';

        // 2. ุชุญุฏูุฏ ุงูุนูุตุฑ ุงููุฑุงุฏ ุชุญูููู (ุตูุญุฉ ุงููุชูุฌุฉ)
        const element = document.getElementById('result'); 

        // 3. ุฎูุงุฑุงุช ุงูุชุญููู (ููุงุญุธุฉ: ููุญุตูู ุนูู ุฃูุถู ูุชูุฌุฉุ ูุฏ ุชุญุชุงุฌ ูุถุจุทูุง)
        const options = {
            scale: 0.9, // ุชุตุบูุฑ ูุชูุงุณุจ ุงูุตูุญุฉ
            useCORS: true,
            allowTaint: true,
            scrollY: 0,
            windowWidth: document.getElementById('result').scrollWidth
        };

        // 4. ุงุณุชุฎุฏุงู html2canvas ูุฅูุดุงุก ุตูุฑุฉ ูู ูุญุชูู HTML
        html2canvas(element, options).then((canvas) => {
            const imgData = canvas.toDataURL('image/png');
            const { jsPDF } = window.jspdf;
            const pdf = new jsPDF('p', 'mm', 'a4'); // ุชููุฆุฉ ููู PDF ุฌุฏูุฏ A4
            const imgWidth = 210; // ุนุฑุถ A4 ุจุงูู mm
            const pageHeight = 295; // ุงุฑุชูุงุน A4 ุจุงูู mm
            const imgHeight = canvas.height * imgWidth / canvas.width;
            let heightLeft = imgHeight;
            let position = 0;

            // 5. ุฅุถุงูุฉ ุงูุตูุฑุฉ ุฅูู ููู PDF (ูุน ุงูุชุนุงูู ูุน ุงูุตูุญุงุช ุงููุชุนุฏุฏุฉ)
            pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
            heightLeft -= pageHeight;

            while (heightLeft >= 0) {
                position = heightLeft - imgHeight;
                pdf.addPage();
                pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;
            }

            // 6. ุญูุธ ุงูููู ุจุงุณู ูุญุฏุฏ
            pdf.save('ูููุฐุฌ-ุชุณููู-ูุฑูุจุฉ.pdf');
            
            // 7. ุฅุนุงุฏุฉ ุฅุธูุงุฑ ุงูุฒุฑ ุจุนุฏ ุงูุงูุชูุงุก
            printBtn.style.display = 'flex'; // ุฃู 'block' ุญุณุจ ุงูุชูุณูู ุงูุฃุตูู
        });
    }
});
const markerBefore = document.getElementById('markerBefore');
  const fuelBeforeSelect = document.getElementById('fuelBeforeSelect');

  // ุชุญุฑูู ุงูุนูุงูุฉ ุญุณุจ ูุณุจุฉ ุงูุจูุฒูู ุงููุฎุชุงุฑุฉ
  fuelBeforeSelect.addEventListener('change', function() {
    let position = '25%'; // ูุงุฑุบ
    if (fuelBeforeSelect.value === 'ุฑุจุน') position = '50%';
    if (fuelBeforeSelect.value === 'ูุตู') position = '75%';
    if (fuelBeforeSelect.value === 'ุซูุงุซุฉ ุฃุฑุจุงุน') position = '87.5%';
    if (fuelBeforeSelect.value === 'ููุชูุฆ') position = '100%';

    markerBefore.style.left = position;
    markerBefore.setAttribute('title', fuelBeforeSelect.value);
  });
/* ุฏุงูุฉ ูุฑุณู ุนูุงูุฉ ุงูุจูุฒูู ุจูุงุกู ุนูู ุงููููุฉ ุงููุตูุฉ */
function placeFuelMarkerOnResult(containerId, value) {
  const cont = document.getElementById(containerId);
  if (!cont || !value) return;

  // ุชุญุฏูุฏ ุงูููุถุน ุงูุฃููู ุงููุณุจู (ูุณุจุฉ ูุฆููุฉ) ุจูุงุกู ุนูู ุงููููุฉ ุงููุตูุฉ
  let xp = 0;
  if (value === 'ูุงุฑุบ') xp = 5;
  else if (value === 'ุฑุจุน') xp = 25;
  else if (value === 'ูุตู') xp = 50;
  else if (value === 'ุซูุงุซุฉ ุฃุฑุจุงุน') xp = 75;
  else if (value === 'ููุชูุฆ') xp = 95;
  else return; // ูุง ุชุฑุณู ุฅุฐุง ูุงูุช ุงููููุฉ ุบูุฑ ูุนุฑููุฉ ุฃู ูุงุฑุบุฉ

  // ุฅูุดุงุก ูุฑุณู ุงูุนูุงูุฉ
  const m = document.createElement('div');
  m.className = 'marker'; // ุงุณุชุฎุฏู ููุณ ุชูุณูู ุนูุงูุงุช ุงูุถุฑุฑ
  m.style.position = 'absolute';
  m.style.left = xp + '%';
  m.style.top = '50%'; // ููุชุตู ุงูุตูุฑุฉ ุนููุฏูุงู
  cont.style.position = 'relative'; // ูุถูุงู ุฃู ููุถุน ุงูุนูุงูุฉ absolute ูุนูู
  cont.appendChild(m);
}/* ููุงุญุธุฉ: ูุฐู ุงูุตูุญุฉ ุชุณุชุฎุฏู ุงูุตูุฑ ุงููุญููุฉ: car.png.png ู car bt.png */
</script>

</body>
</html>
